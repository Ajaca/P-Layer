# Introduction de P Layer

---

一个顺利完成了播放春日影这一最高指示的播放器。

总览中的要求：

> 必须：
>
> + Android原生APP，使用**Kotlin**
> + 实现完整的登陆注册功能，包括**整合的**登录注册界面，记住密码，已登录跳过登录，多用户支持
> + 底部导航栏
> + 使用本地数据库
> + *避免程序崩溃*
> + Markdown文件介绍

> 应当实现：
>
> + 使用**Jetpack Components**构建界面
>
> + UI界面拥有*清晰*的视觉层级
>
> + *适当*的注释
>
> + 遵守*合适*的代码规范
>
> + 代码上传至远程Git仓库。
>
>   > <https://gitcode.com/Aiaca/P_Layer.git>
>   >
>   > <https://github.com/Ajaca/P-Layer.git>

> 更进一步：
>
> + 使用Kotlin
>
>   > + 使用Jetpack Compose
>
> + 使用Material Design 3

实现的功能如下：

> 基础功能
>
> + 播放，暂停，继续播放，并显示播放进度
> + 以列表形式展现播放列表与歌单，歌曲**来源于本地**
> + 用户可以收藏歌曲，并查看播放记录

> 进阶功能
>
> + 在单曲，列表，随机播放三种模式中切换

---

## 登录相关

---

### 未登录时实现的功能

仍然可以播放所有歌曲，但不能创建歌单，查看历史。

### 登录

在未登录时点击头像框，弹出一个Dialog用于注册/登录，两个功能共用一个Dialog。

注册成功有以下要求：

> 1. 账号，密码不为空。
> 2. 账号不存在（未被注册）
> 3. 密码不得少于4位

注册成功后用户卡会展示用户名，可以在设置中登出。

---

## 歌曲播放

---

### 选择播放列表

打开任意播放列表，如喜欢，歌单，所有歌曲，历史，然后点击列表内的任何一首歌，即可将整个列表加入歌单。

### 播放控制

播放控制有两种方法。

1. 在歌曲开始播放后，底栏上方会显示一个播放卡片，提供基础的播放/暂停，下一曲的功能。
2. 要获取进阶的功能，点击播放卡片，会弹出控制栏，提供了上下首，歌单添加，切换播放模式的选项，以及一个进度条可以更改播放进度。

### 播放模式

拥有三种模式。点击右下角的图标即可在弹出的popup中切换播放模式。因为我没有找图标，所以用的是默认的图标，略显抽象。

另，因屎山代码的原因，切换播放模式后，歌曲会重新播放。

---

## 歌单

---

### 创建 / 删除歌单

点击主界面那个非常醒目的添加歌单的卡片，点击之，然后输入歌单的名字，就可以创建歌单了。

点击已经创建好的歌单的右侧的X，即可删除该歌单。

### 歌单内添加歌曲

有两种方法：

1. 点击歌曲卡片右边的菜单，选择添加歌曲。
2. 播放时，在播放的控制栏添加。

### 删除歌曲

点击歌曲卡片右边的菜单删除。

---

## 设置

---

### 导入歌曲

先在设置中设置好路径，然后再点击导入。值得一提的是，由于没做异步，请一次不要导入太多首歌，除非你对你手机的性能有充足的自信。

### 切换主题

直接点，但是感觉效果似乎不好，慎用。

